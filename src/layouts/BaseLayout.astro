---
import "../styles/global.css";

const {
  title = "Synthetic Audience Lab",
  description = "Simula cómo reacciona tu público antes de gastar en anuncios."
} = Astro.props;
---

<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
  </head>

  <body class="min-h-screen bg-[#1a1b20] text-zinc-100 antialiased scroll-smooth">
    <slot />

    <script>
      (() => {
        const onReady = () => {
          const targets = document.querySelectorAll(".sal-animate-fade-up");
          if (!targets.length) return;

          const observer = new IntersectionObserver(
            (entries) => {
              for (const entry of entries) {
                const el = entry.target;
                if (entry.isIntersecting) {
                  el.classList.add("is-visible");
                } else {
                  // Reset para que la animación se repita al volver a entrar
                  el.classList.remove("is-visible");
                }
              }
            },
            { threshold: 0.18 }
          );

          targets.forEach((el) => observer.observe(el));
        };

        if (document.readyState === "loading") {
          document.addEventListener("DOMContentLoaded", onReady);
        } else {
          onReady();
        }
      })();
    </script>
<script is:inline>
(function (C, A) {
  const d = C.document;
  C.Cal = C.Cal || function () { (C.Cal.q = C.Cal.q || []).push(arguments); };
  const s = d.createElement("script");
  s.async = true;
  s.src = A;
  d.head.appendChild(s);
})(window, "https://app.cal.com/embed/embed.js");

Cal("init", { origin: "https://cal.com" });
Cal("ui", { theme: "dark", layout: "month_view" });
</script>
  </body>
</html>