---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { cases, type CaseStudy } from "../../data/cases";

export function getStaticPaths() {
  return cases.map((c) => ({
    params: { slug: c.slug },
    props: { c },
  }));
}

const { c } = Astro.props as { c: CaseStudy };
---

<BaseLayout title={`${c.title} — Synthetic Audience Lab`} description={c.subtitle}>
  <main class="mx-auto max-w-5xl px-6 py-20">

    <header class="sal-animate-fade-up">
      
      <div class="mb-10">
        <a 
          href="/casos/" 
          class="group relative flex h-10 w-10 items-center justify-center overflow-hidden rounded-full border border-zinc-800 bg-zinc-900/40 backdrop-blur-md transition-all duration-300 hover:w-28 hover:bg-zinc-800 hover:border-zinc-700 cursor-pointer"
        >
          <div class="absolute left-0 flex h-10 w-10 items-center justify-center transition-transform duration-300 group-hover:-translate-x-1">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-zinc-400 group-hover:text-zinc-100">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
          </div>
          <span class="pl-4 text-xs font-medium text-zinc-200 opacity-0 transition-opacity duration-300 group-hover:opacity-100 whitespace-nowrap">
            Volver
          </span>
        </a>
      </div>

      <div class="flex flex-col gap-4">
        <div class="flex items-center gap-3">
          <span class="rounded-full border border-zinc-800 bg-zinc-900/50 px-3 py-1 text-[10px] uppercase tracking-widest text-zinc-400">
            {c.tag}
          </span>
          {c.winNote && (
            <span class="rounded-full bg-emerald-500/10 px-3 py-1 text-[10px] font-medium text-emerald-400 border border-emerald-500/20">
              {c.winNote}
            </span>
          )}
        </div>

        <h1 class="text-4xl md:text-6xl font-medium tracking-tight text-white max-w-4xl">
          {c.title}
        </h1>
        
        <p class="text-xl text-zinc-400 max-w-2xl leading-relaxed mt-2">
          {c.subtitle}
        </p>
      </div>

      <div class="mt-12 grid grid-cols-1 sm:grid-cols-3 border-y border-zinc-800 divide-y divide-zinc-800 sm:divide-y-0 sm:divide-x">
        {c.kpis.slice(0,3).map((k) => (
          <div class="py-8 sm:px-8 sm:first:pl-0 sm:last:pr-0">
            <div class="text-xs font-medium uppercase tracking-wider text-zinc-500">{k.label}</div>
            <div class="mt-2 text-3xl md:text-4xl font-light text-zinc-100 tracking-tight">{k.value}</div>
            <div class="mt-2 text-xs text-zinc-500">{k.note ?? "—"}</div>
          </div>
        ))}
      </div>

    </header>

    <section class="mt-16 sal-animate-fade-up">
      <div class="rounded-3xl border border-zinc-800 bg-zinc-950/30 p-10 text-center">
        <p class="text-zinc-500 text-sm">El desglose técnico completo (gráficas y CSV) para {c.title} se carga aquí.</p>
      </div>
    </section>

  </main>
</BaseLayout>