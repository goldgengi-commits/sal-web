---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { cases, type CaseStudy } from "../../data/cases";

export function getStaticPaths() {
  return cases.map((c) => ({
    params: { slug: c.slug },
    props: { c },
  }));
}

const { c } = Astro.props as { c: CaseStudy };
---

<BaseLayout title={`${c.title} — Synthetic Audience Lab`} description={c.subtitle}>
  <main class="mx-auto max-w-6xl px-6 py-20">

    <header class="sal-animate-fade-up">
      
      <div class="mb-10">
        <a 
          href="/casos/" 
          class="group relative flex h-10 w-10 items-center justify-center overflow-hidden rounded-full border border-zinc-800 bg-zinc-900/40 backdrop-blur-md transition-all duration-300 hover:w-28 hover:bg-zinc-800 hover:border-zinc-700 cursor-pointer"
        >
          <div class="absolute left-0 flex h-10 w-10 items-center justify-center transition-transform duration-300 group-hover:-translate-x-1">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="text-zinc-400 group-hover:text-zinc-100">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
          </div>
          <span class="pl-4 text-xs font-medium text-zinc-200 opacity-0 transition-opacity duration-300 group-hover:opacity-100 whitespace-nowrap">
            Volver
          </span>
        </a>
      </div>

      <div class="flex flex-col gap-4">
        <div class="flex items-center gap-3">
          <span class="rounded-full border border-zinc-800 bg-zinc-900/50 px-3 py-1 text-[10px] uppercase tracking-widest text-zinc-400">
            {c.tag}
          </span>
          {c.winNote && (
            <span class="rounded-full bg-emerald-500/10 px-3 py-1 text-[10px] font-medium text-emerald-400 border border-emerald-500/20">
              {c.winNote}
            </span>
          )}
        </div>

        <h1 class="text-4xl md:text-6xl font-medium tracking-tight text-white max-w-4xl">
          {c.title}
        </h1>
        
        <p class="text-xl text-zinc-400 max-w-2xl leading-relaxed mt-2">
          {c.subtitle}
        </p>
      </div>

      <div class="mt-12 grid grid-cols-1 sm:grid-cols-3 border-y border-zinc-800 divide-y divide-zinc-800 sm:divide-y-0 sm:divide-x">
        {c.kpis.slice(0,3).map((k) => (
          <div class="py-8 sm:px-8 sm:first:pl-0 sm:last:pr-0">
            <div class="text-xs font-medium uppercase tracking-wider text-zinc-500">{k.label}</div>
            <div class="mt-2 text-3xl md:text-4xl font-light text-zinc-100 tracking-tight">{k.value}</div>
            <div class="mt-2 text-xs text-zinc-500">{k.note ?? "—"}</div>
          </div>
        ))}
      </div>

    </header>

    <section class="mt-16 sal-animate-fade-up space-y-8">
      
      {c.content?.context && (
        <div class="max-w-3xl">
          <h3 class="text-sm font-medium text-zinc-200 uppercase tracking-wider mb-3">El Desafío</h3>
          <p class="text-zinc-400 leading-relaxed text-lg">{c.content.context}</p>
        </div>
      )}

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 pt-8">
        
        <div class="rounded-3xl border border-zinc-800 bg-zinc-950 p-8 flex flex-col">
          <div class="h-10 w-10 rounded-full bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center mb-6 text-emerald-400">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 18.75h-9m9 0a3 3 0 013 3h-15a3 3 0 013-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0V5.625a2.625 2.625 0 11-5.25 0v9.75m8.25-5.25h-3m-9 0h-3" /></svg>
          </div>
          <h3 class="text-sm font-medium text-white mb-2">El Ganador</h3>
          <p class="text-sm text-zinc-400 leading-relaxed flex-1">
            {c.content?.winnerContent || "Datos pendientes de simulación."}
          </p>
        </div>

        <div class="rounded-3xl border border-zinc-800 bg-zinc-950 p-8 flex flex-col">
          <div class="h-10 w-10 rounded-full bg-blue-500/10 border border-blue-500/20 flex items-center justify-center mb-6 text-blue-400">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 001.5-.189m-1.5.189a6.01 6.01 0 01-1.5-.189m3.75 7.478a12.06 12.06 0 01-4.5 0m3.75 2.383a14.406 14.406 0 01-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 10-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" /></svg>
          </div>
          <h3 class="text-sm font-medium text-white mb-2">Driver Psicológico</h3>
          <p class="text-sm text-zinc-400 leading-relaxed flex-1">
            {c.content?.driverContent || "Análisis pendiente."}
          </p>
        </div>

        <div class="rounded-3xl border border-zinc-800 bg-zinc-950 p-8 flex flex-col">
          <div class="h-10 w-10 rounded-full bg-purple-500/10 border border-purple-500/20 flex items-center justify-center mb-6 text-purple-400">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" /></svg>
          </div>
          <h3 class="text-sm font-medium text-white mb-2">Acción Recomendada</h3>
          <p class="text-sm text-zinc-400 leading-relaxed flex-1">
            {c.content?.actionContent || "Recomendación pendiente."}
          </p>
        </div>

      </div>
    </section>

  </main>
</BaseLayout>