---
import BaseLayout from "../layouts/BaseLayout.astro";
import { cases as allCases } from "../data/cases";

const cases = Array.isArray(allCases) ? allCases : [];
// Lógica: 3 para el hero, 3 para la grid de abajo
const heroCases = cases.slice(0, 3);
const featuredCases = cases.slice(3, 6);

// Configuración de contacto
const brand = "Synthetic Audience Lab";
const email = "syntheticaudiencelab@hotmail.com";
const mailtoSubject = "Demo — Synthetic Audience Lab";
const mailtoBody = "Hola,\n\nQuiero agendar una demo.\n\nEmpresa:\nWeb:\nQué estás probando (ads/landing/mensajes):\nPresupuesto mensual aproximado en ads:\n\nGracias.";
const ctaHref = `mailto:${email}?subject=${encodeURIComponent(mailtoSubject)}&body=${encodeURIComponent(mailtoBody)}`;
---

<BaseLayout title={brand}>
  
  <header class="sticky top-0 z-50 border-b border-zinc-900/70 bg-zinc-950/60 backdrop-blur">
    <div class="mx-auto max-w-6xl px-6">
      <div class="flex h-14 items-center justify-between">
        <a href="#" class="text-sm font-medium text-zinc-200 hover:text-white">
          {brand}
        </a>

        <nav class="hidden md:flex items-center gap-7 text-sm text-zinc-300">
          <a href="#problema" class="hover:text-white">Problema</a>
          <a href="#que-es" class="hover:text-white">Qué es</a>
          <a href="#validacion" class="hover:text-white">Cómo se valida</a>
          <a href="/privacidad" class="hover:text-white">Privacidad</a>
          <a href="/casos/" class="hover:text-white">Casos</a>
          <a href="#para-quien" class="hover:text-white">Para quién</a>
          <a href="#faq" class="hover:text-white">FAQ</a>
        </nav>

        <div class="flex items-center gap-3"> 
          <button
            type="button"
            data-cal-link="syntheticaudiencelab/demo-videollamada-20-min"
            data-cal-namespace="salDemo"
            data-cal-config='{"layout":"month_view"}'
            class="sal-cta-nav inline-flex items-center justify-center rounded-full px-4 py-2 text-xs font-semibold text-white transition" 
          > 
            Agendar demo 
          </button>

          <a href={ctaHref} class="hidden lg:inline text-sm text-zinc-300 hover:text-white">
            Contacto
          </a>
        </div>
      </div>
    </div>
  </header>

  <main>

    <section class="relative pt-24 pb-20 md:pt-32 md:pb-28 px-6 overflow-hidden">
      <div class="mx-auto max-w-7xl grid grid-cols-1 lg:grid-cols-2 gap-16 items-center">

        <div class="max-w-2xl sal-animate-fade-up relative z-10">
          <p class="text-[10px] uppercase tracking-[0.2em] text-zinc-500 font-medium">
            IA aplicada a marketing para priorizar creatividades
          </p>

          <h1 class="mt-6 text-5xl md:text-7xl font-medium tracking-tighter text-white leading-[1.05]">
            Reduce el riesgo creativo <br class="hidden md:block" /> 
            <span class="text-zinc-500">antes de invertir.</span>
          </h1>

          <p class="mt-8 text-lg md:text-xl text-zinc-400 leading-relaxed max-w-lg">
            Synthetic Audience Lab simula reacciones y prioriza mensajes para que lances con señal, no con intuición.
          </p>

          <div class="mt-10 flex flex-wrap gap-4">
            <button
              type="button"
              data-cal-link="syntheticaudiencelab/demo-videollamada-20-min"
              data-cal-namespace="salDemo"
              data-cal-config='{"layout":"month_view"}'
              class="sal-cta"
            >
              Agendar demo
            </button>

            <a href="#validacion" class="sal-cta sal-cta-secondary rounded-full px-6 py-2 text-sm font-medium text-white transition hover:bg-white/5">
              Ver método
            </a>
          </div>

          <div class="mt-8 flex items-center gap-2 text-sm text-zinc-500">
             <span>¿Estás en Madrid?</span>
            <button
              type="button"
              data-cal-link="syntheticaudiencelab/demo-presencial-solo-madrid-45-min"
              data-cal-namespace="salMadrid"
              data-cal-config='{"layout":"month_view"}'
              class="text-zinc-300 hover:text-white underline underline-offset-4 transition"
            >
              Reserva presencial
            </button>
          </div>

          <div class="mt-8 flex flex-wrap gap-3 text-[10px] uppercase tracking-wider text-zinc-600">
            <span class="border border-zinc-900 rounded-full px-3 py-1">Piloto 2.500€</span>
            <span class="border border-zinc-900 rounded-full px-3 py-1">Entrega 5 días</span>
          </div>
        </div>

        <div class="relative w-full sal-animate-fade-up">
          <div class="sal-hero-rotator">
            {heroCases.map((c, i) => (
              /* CAPA 1: Wrapper de animación (Slide) */
              <div class={`sal-hero-slide ${i === 0 ? "is-active" : ""}`}>
                
                /* CAPA 2: Tarjeta Visual (Card) */
                <a
                  href={`/casos/${c.slug}/`}
                  class="sal-accent-card"
                  style={`--a:${c.accent.a};--b:${c.accent.b};--c:${c.accent.c};`}
                >
                  <div class="sal-accent-inner flex flex-col justify-between h-full">
                    
                    <div class="flex items-start justify-between">
                      <div class="text-[10px] uppercase tracking-[0.2em] text-zinc-400">
                        Simulación · 8.000 perfiles
                      </div>
                      {c.winNote && (
                        <div class="rounded-full bg-emerald-500/10 border border-emerald-500/20 px-3 py-1 text-[10px] font-bold text-emerald-400 shadow-[0_0_15px_rgba(16,185,129,0.1)]">
                          {c.winNote}
                        </div>
                      )}
                    </div>

                    <div class="mt-auto mb-auto py-8">
                      <h3 class="text-3xl md:text-4xl font-medium text-white tracking-tight">{c.title}</h3>
                      <p class="mt-4 text-zinc-400 text-lg leading-relaxed">{c.heroBlurb}</p>
                    </div>

                    <div class="grid grid-cols-3 gap-4 border-t border-white/10 pt-6 mt-auto">
                      {c.kpis.slice(0, 3).map((k) => (
                        <div>
                          <div class="text-[10px] uppercase tracking-wider text-zinc-500">{k.label}</div>
                          <div class="mt-1 text-2xl md:text-3xl font-light text-zinc-100">{k.value}</div>
                          <div class="mt-1 text-[10px] text-zinc-600 truncate">{k.note}</div>
                        </div>
                      ))}
                    </div>

                  </div>
                </a>
              </div>
            ))}
          </div>
        </div>

      </div>
    </section>

    <section id="problema" class="py-24 border-t border-zinc-900 bg-zinc-950/30">
      <div class="mx-auto max-w-6xl px-6 sal-animate-fade-up">
        <h2 class="text-3xl md:text-4xl font-light tracking-tight text-white max-w-3xl">
          Las empresas siguen gastando dinero en campañas que nunca debieron lanzarse.
        </h2>
        <p class="mt-6 text-lg text-zinc-400 max-w-2xl">
          Las pruebas A/B consumen tiempo y presupuesto. Y muchos mensajes se deciden con intuición.
          Reducimos ese riesgo probando antes de quemar capital.
        </p>

        <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="rounded-3xl border border-zinc-800 p-8 bg-zinc-950/50">
            <div class="h-10 w-10 rounded-xl bg-white/5 border border-zinc-800 grid place-items-center mb-6 text-zinc-400">
              <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </div>
            <div class="font-medium text-white">Tiempo perdido</div>
            <p class="mt-3 text-sm text-zinc-400 leading-relaxed">Iteraciones lentas en Meta/Google Ads. Semanas para saber que el ángulo no funcionaba.</p>
          </div>

          <div class="rounded-3xl border border-zinc-800 p-8 bg-zinc-950/50">
            <div class="h-10 w-10 rounded-xl bg-white/5 border border-zinc-800 grid place-items-center mb-6 text-zinc-400">
              <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </div>
            <div class="font-medium text-white">Dinero quemado</div>
            <p class="mt-3 text-sm text-zinc-400 leading-relaxed">Creatividades equivocadas que inflan el CPC y consumen el 40% del presupuesto inicial.</p>
          </div>

          <div class="rounded-3xl border border-zinc-800 p-8 bg-zinc-950/50">
            <div class="h-10 w-10 rounded-xl bg-white/5 border border-zinc-800 grid place-items-center mb-6 text-zinc-400">
               <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
            </div>
            <div class="font-medium text-white">Incertidumbre</div>
            <p class="mt-3 text-sm text-zinc-400 leading-relaxed">No sabes qué mensaje engancha y cuál repele hasta que ya has pagado la factura.</p>
          </div>
        </div>
      </div>
    </section>

    <section id="que-es" class="py-24 border-t border-zinc-900">
      <div class="mx-auto max-w-6xl px-6 sal-animate-fade-up">
        <div class="md:flex md:items-end md:justify-between mb-12">
          <div class="max-w-2xl">
            <h2 class="text-3xl md:text-4xl font-light tracking-tight text-white">Tu laboratorio de comportamiento</h2>
            <p class="mt-4 text-lg text-zinc-400">
              Creamos perfiles sintéticos coherentes con tu audiencia (ICP) y probamos tus mensajes en minutos, no en meses.
            </p>
          </div>
        </div>

        <div class="rounded-3xl border border-zinc-800 bg-zinc-950/30 p-10">
          <div class="grid grid-cols-1 md:grid-cols-3 gap-12 relative">
             <div class="hidden md:block absolute top-12 left-0 w-full h-px bg-gradient-to-r from-transparent via-zinc-800 to-transparent"></div>

            <div class="relative z-10">
              <div class="h-24 w-24 rounded-full border border-zinc-800 bg-zinc-900 grid place-items-center mb-6 text-xl font-medium text-white shadow-lg shadow-black/50">1</div>
              <h3 class="text-lg font-medium text-white">Generamos</h3>
              <p class="mt-2 text-sm text-zinc-400 leading-relaxed">Creamos una audiencia sintética basada en tu ICP real: miedos, deseos, fricciones y lenguaje.</p>
            </div>

            <div class="relative z-10">
               <div class="h-24 w-24 rounded-full border border-zinc-800 bg-zinc-900 grid place-items-center mb-6 text-xl font-medium text-white shadow-lg shadow-black/50">2</div>
              <h3 class="text-lg font-medium text-white">Simulamos</h3>
              <p class="mt-2 text-sm text-zinc-400 leading-relaxed">Exponemos tus anuncios y mensajes a estos perfiles. Medimos intención de clic y rechazo psicológico.</p>
            </div>

            <div class="relative z-10">
               <div class="h-24 w-24 rounded-full border border-zinc-800 bg-zinc-900 grid place-items-center mb-6 text-xl font-medium text-white shadow-lg shadow-black/50">3</div>
              <h3 class="text-lg font-medium text-white">Entregamos</h3>
              <p class="mt-2 text-sm text-zinc-400 leading-relaxed">Un informe con ganadores claros y el "por qué". Listo para que lo implementes en Meta/Google.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="py-24 border-t border-zinc-900 bg-zinc-950/30">
      <div class="mx-auto max-w-6xl px-6 sal-animate-fade-up">
        <div class="flex items-end justify-between mb-12">
          <div>
            <h2 class="text-3xl md:text-4xl font-light text-white">Más simulaciones</h2>
            <p class="mt-2 text-zinc-400">Resultados recientes por sector.</p>
          </div>
          <a href="/casos/" class="hidden md:inline-flex items-center text-sm text-zinc-300 hover:text-white transition">
            Ver todos los casos →
          </a>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          {featuredCases.map((c) => (
            <a href={`/casos/${c.slug}/`} class="group block h-full">
              <div class="h-full rounded-3xl border border-zinc-800 bg-zinc-900/50 p-8 transition duration-300 hover:border-zinc-600 hover:bg-zinc-900">
                <div class="text-[10px] uppercase tracking-[0.2em] text-zinc-500">{c.tag}</div>
                <h3 class="mt-4 text-xl font-medium text-zinc-100 group-hover:text-white">{c.title}</h3>
                <p class="mt-3 text-sm text-zinc-400 line-clamp-3 leading-relaxed">{c.subtitle}</p>
                <div class="mt-6 text-xs font-medium text-white underline decoration-zinc-700 underline-offset-4 group-hover:decoration-white transition">
                  Leer análisis
                </div>
              </div>
            </a>
          ))}
        </div>
        
        <div class="mt-8 md:hidden">
           <a href="/casos/" class="text-sm text-zinc-300 underline">Ver todos los casos →</a>
        </div>
      </div>
    </section>

    <section id="faq" class="py-24 border-t border-zinc-900">
      <div class="mx-auto max-w-4xl px-6 sal-animate-fade-up">
        <h2 class="text-3xl font-light tracking-tight text-center mb-16">Preguntas frecuentes</h2>

        <div class="grid gap-6">
          <div class="rounded-2xl border border-zinc-800 bg-zinc-950/40 p-6">
            <h3 class="font-medium text-zinc-200">¿Esto es CTR real?</h3>
            <p class="mt-2 text-sm text-zinc-400 leading-relaxed">No. Son <span class="text-white">scores de intención comparativa</span>. Nuestro modelo predice qué variante tiene mayor probabilidad de éxito basándose en los drivers psicológicos de tu audiencia.</p>
          </div>

          <div class="rounded-2xl border border-zinc-800 bg-zinc-950/40 p-6">
            <h3 class="font-medium text-zinc-200">¿Qué necesito para empezar el piloto?</h3>
            <p class="mt-2 text-sm text-zinc-400 leading-relaxed">Tu URL, una definición breve de tu cliente ideal (quién compra y por qué) y los 3 mensajes o creatividades que quieres enfrentar.</p>
          </div>

          <div class="rounded-2xl border border-zinc-800 bg-zinc-950/40 p-6">
            <h3 class="font-medium text-zinc-200">¿Usáis datos personales?</h3>
            <p class="mt-2 text-sm text-zinc-400 leading-relaxed">No. Trabajamos 100% con datos sintéticos. Generamos perfiles simulados que imitan el comportamiento humano sin comprometer la privacidad de nadie.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="py-24 border-t border-zinc-900">
      <div class="mx-auto max-w-5xl px-6">
        <div class="relative overflow-hidden rounded-3xl border border-zinc-800 bg-zinc-900 p-12 md:p-16 text-center">
           <div class="absolute top-0 left-1/2 -translate-x-1/2 w-full h-full bg-gradient-to-b from-indigo-500/10 via-transparent to-transparent opacity-50 pointer-events-none"></div>
          
          <div class="relative z-10">
            <h2 class="text-3xl md:text-5xl font-medium tracking-tighter text-white">Deja de adivinar.</h2>
            <p class="mt-6 text-xl text-zinc-400 max-w-2xl mx-auto">
              Tu próxima campaña puede ser rentable antes de lanzarla. <br />
              Valida tu creatividad en 5 días por 2.500€.
            </p>

            <div class="mt-10 flex flex-col sm:flex-row items-center justify-center gap-4">
              <button
                type="button"
                data-cal-link="syntheticaudiencelab/demo-videollamada-20-min"
                data-cal-namespace="salDemo"
                data-cal-config='{"layout":"month_view"}'
                class="sal-cta"
              >
                Agendar demo
              </button>
              <a href="/casos/" class="sal-cta sal-cta-secondary">
                Ver casos de estudio
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="border-t border-zinc-900 py-12 bg-black">
      <div class="mx-auto max-w-6xl px-6 flex flex-col md:flex-row justify-between gap-8 text-sm">
        <div class="space-y-4">
          <div class="font-medium text-white">{brand}</div>
          <div class="flex flex-col gap-2 text-zinc-500">
            <a href={ctaHref} class="hover:text-zinc-300">Email</a>
            <a href="https://www.linkedin.com/" target="_blank" class="hover:text-zinc-300">LinkedIn</a>
          </div>
        </div>
        <div class="flex flex-col gap-2 text-zinc-500 md:text-right">
          <a href="/privacidad" class="hover:text-zinc-300">Política de Privacidad</a>
          <a href="/aviso-legal" class="hover:text-zinc-300">Aviso Legal</a>
          <p class="mt-4 text-xs opacity-50">Datos 100% sintéticos. Sin cookies de terceros.</p>
        </div>
      </div>
    </footer>

  </main>
</BaseLayout>

<script is:inline>
  (() => {
    const root = document.querySelector(".sal-hero-rotator");
    if (!root) return;
    // Seleccionamos solo los slides directos
    const slides = Array.from(root.querySelectorAll(".sal-hero-slide"));
    if (slides.length <= 1) return;

    let i = 0;
    
    // Función para actualizar estado
    const set = (idx) => {
      slides.forEach((el, j) => {
        if (j === idx) {
          el.classList.add("is-active");
        } else {
          el.classList.remove("is-active");
        }
      });
    };

    // Inicializar
    set(0);

    // Loop infinito
    setInterval(() => {
      i = (i + 1) % slides.length;
      set(i);
    }, 5000); // 5 segundos por slide
  })();
</script>